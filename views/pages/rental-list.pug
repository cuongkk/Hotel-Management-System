extends ../layouts/default.pug
include ../mixins/checkbox-30.pug

block main
	main.main 
		h1.box-title Lập phiếu thuê phòng
		.main1
			//- Section 4
			.section-4
				.inner-wrap
					.inner-item.inner-label
						<i class="fa-solid fa-filter"></i> Bộ lọc
					.inner-item
						select(id="statusSelect")
							option(value="") Trạng thái
							option(value="AVAILABLE") Hoạt động
							option(value="OCCUPIED") Đang thuê
							option(value="MAINTENANCE") Tạm dừng
					.inner-item
						select(id="roomTypeSelect")
							option(value="") Loại phòng
							option(value="Standard") Loại Standard
							option(value="Superior") Loại Superior
							option(value="Deluxe") Loại Deluxe

					.inner-item.inner-reset
						button(type="button" id="applyBtnForRental") Áp dụng
			//- End Section 4
			//- Section 5
			.section-5
				.inner-wrap
					.inner-search
						i.fa-solid.fa-magnifying-glass
						input(
							type="text"
							id="roomNameInput"
							placeholder="Tìm kiếm tên phòng"
						)
			//- End Section 5

		//- Section 6
		.section-6 
			.table-2 
				table 
					thead 
						tr
							th.text-left Mã phòng
							th.text-left Tên phòng
							th.text-left Loại phòng 
							th.text-center Số khách tối đa
							th.text-center Đơn giá
							th.text-center Trạng thái
							th.text-left Lễ tân phụ trách
							th.text-left Hành động
						
					tbody
						if rooms && rooms.length
							each room in rooms
								tr
									td.text-left= room.room_id
									td.text-left= room.room_name
									td.text-left= room.room_type
									td.text-center= room.max_guest
									td.text-left #{room.price.toLocaleString()} VND
									td.text-center
										if room.status === "AVAILABLE"
											span.status.status-green Hoạt động
										else if room.status === "OCCUPIED"
											span.status.status-yellow Đang thuê
										else
											span.status.status-red Tạm dừng
									td.text-left= room.receptionist || "—"
									td.text-left
										.box-actions
											if room.status === "AVAILABLE"
												a.inner-edit(href=`/rental/create?roomId=${room.room_id}`)
													i.fa-solid.fa-pen-to-square
											else
												a.inner-edit.disabled(href="javascript:void(0)" style="pointer-events:none; opacity:0.5;")
													i.fa-solid.fa-pen-to-square
											a.inner-remove(href=`/rental/delete`)
												i.fa-solid.fa-trash-can

						else
							tr
							td(colspan="8" style="text-align:center") Không có dữ liệu

			.pagination
				select.inner-pagination(onchange="location.href=this.value")
					- for (let p = 1; p <= totalPages; p++)
						option(
							value=`/rental?roomName=${encodeURIComponent(filters.roomName || '')}&status=${encodeURIComponent(filters.status || '')}&roomType=${encodeURIComponent(filters.roomType || '')}&page=${p}&pageSize=${pageSize}`
							selected=(p === page)
						) Trang #{p}
				.inner-next
					if page > 1
						a(href=`/rental?roomName=${encodeURIComponent(filters.roomName || '')}&status=${encodeURIComponent(filters.status || '')}&roomType=${encodeURIComponent(filters.roomType || '')}&page=${page - 1}&pageSize=${pageSize}`)
							i.fa-solid.fa-chevron-left
					if page < totalPages
						a(href=`/rental?roomName=${encodeURIComponent(filters.roomName || '')}&status=${encodeURIComponent(filters.status || '')}&roomType=${encodeURIComponent(filters.roomType || '')}&page=${page + 1}&pageSize=${pageSize}`)
							i.fa-solid.fa-chevron-right

						//- End Section 6

block scripts
	script(src="/assets/js/script.js")
